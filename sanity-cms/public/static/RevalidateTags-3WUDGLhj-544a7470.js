import{q as g,r as u,s as m}from"./sanity-fd252939.js";function b(l){const{channel:s}=l,t=g({apiVersion:"2023-10-16"}),r=u.useMemo(()=>t.config(),[t]);return u.useEffect(()=>{if(s){const{projectId:c,dataset:d}=r,p=t.listen('*[!(_type in path("system.**"))]',{},{events:["mutation"],includePreviousRevision:!1,includeResult:!0,visibility:"query",tag:"presentation-loader"}).subscribe(e=>{var n,o,a;if(e.type!=="mutation"||e.transition==="disappear")return;const i=(n=e.result)==null?void 0:n._type;if(!i)return void console.warn("Type is missing, skipping revalidation",e);const v=(a=(o=e.result)==null?void 0:o.slug)!=null&&a.current?"".concat(i,":").concat(e.result.slug.current):void 0,f=[m(e.documentId),i,v].filter(Boolean);s.send("loaders","loader/revalidate-tags",{projectId:c,dataset:d,tags:f})});return()=>p.unsubscribe()}},[s,t,r]),null}export{b as default};
